{% load django_bootstrap5 %}
{% load static %}

<!-- Navbar 1 -->
<nav class="navbar-stretch navbar-expand-lg p-0 bg-white sticky-top">
  <div class="d-flex flex-column px-5 py-2">
    <ul class="navbar-nav me-0 mb-2 mb-lg-0 d-flex justify-content-between align-items-center">
      <!-- 로고 -->
      <div>
        <a class="navbar-brand" href="">
          <img src="{% static 'images/맛팔해조 로고.png' %}" alt="Logo" style="width: 11rem; height: 4rem;">
        </a>
      </div>
      <!-- 검색창 -->
      <div>
        <li class="nav-item">
          <form class="form-inline my-2 my-lg-0 d-flex" style="position:sticky; top:70px; right:25px;" action="#" method="get">
            {% csrf_token %}
            <input class="form-control bg-light" type="search" placeholder="지역, 음식 또는 식당" aria-label="Search" name="q">
            <button class="btn btn-search  ms-2" type="submit">
              <i class="bi bi-search"></i>
            </button>
          </form>
        </li>
      </div>

      <div class="d-flex">
        {% if request.user.is_authenticated %}
          <li class="nav-item nav1-text">
            <a class="nav-link" href="#">{{ request.user }}</a>
          </li>
          <li class="nav-item nav1-text">
            <a class="nav-link" href="#">로그아웃</a>
          </li>
        {% else %}
          <li class="nav-item me-4 nav1-text">
            <a class="nav-link" href="#">로그인</a>
          </li>
          <li class="nav-item nav1-text">
            <a class="nav-link" href="#">회원가입</a>
          </li>
        {% endif %}
      </div>
    </ul>
  </div>

  <!-- Navbar 2 -->
  <!-- 아래로 스크롤 => 사라짐 / 위로 스크롤 => 나타남 -->
  <ul class="lower-navbar navbar-nav text-white d-flex justify-content-between align-items-center px-5 py-1">
    <div class="d-flex">
      <li class="nav-item mx-5">
        <a class="nav-link nav2-text" aria-current="page" href="#">All</a>
      </li>
      <li class="nav-item me-5">
        <a class="nav-link nav2-text" aria-current="page" href="#">팔로잉</a>
      </li>
    </div>
    <div>
      <li class="nav-item mx-5">
        <a class="nav-link nav2-mypage" aria-current="page" href="#">마이페이지</a>
      </li>
    </div>
  </ul>
</div>
</div>
</nav>

<script src="http://code.jquery.com/jquery-latest.min.js"></script>
<script>
var lastScrollTop = 0;

$(window).scroll(function () {
var scrollTop = $(this).scrollTop();/* 스크롤바 수직 위치를 가져옵니다, 괄호 안에 값(value)이 있을 경우 수직 위치를 정합니다. */
// scrollTop - 선택한 요소의 스크롤바 수직 위치를 반환하거나 스크롤바 수직 위치를 정하는 메소드

if (scrollTop >= 100) { // 숫자에 따라 아래로 스크롤 했을 때 사라지는 영역의 크기가 바뀝니다.
  if ((scrollTop > lastScrollTop) && (lastScrollTop > 0)) {
    /* &&: AND, 두 값이 모두 참이어야 값이 출력 */
    /* 화면에 나오지 않을 때: top값을 마이너스로 요소가 보이지 않게 사용해야함 */
    $(".scroll_01").css("top", "-100px");
  } else {
    $(".scroll_01").css("top", "0px");
  }

  lastScrollTop = scrollTop;
}
</script>